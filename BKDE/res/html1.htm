<!DOCTYPE HTML PUBLIC "-// W3C// DTD HTML 4.01 Transitional// EN"
"http:// www.w3.org/TR/html4/loose.dtd">
<html>

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>About</title>
<style type="text/css">
<!--
body {
	font: 9pt "Courier New", Courier, monospace;
	color: #00FF00;
	background: #000000;
}
h1 {
	font-size: 12pt;
	font-weight: bold;
	margin-top: 6pt;
	margin-bottom: 1pt;
}
h2 {
	font-size: 11pt;
	font-weight: bold;
	margin-top: 6pt;
	margin-bottom: 1pt;
}
h3 {
	font-size: 10pt;
	font-weight: bold;
	text-decoration: underline;
	margin-top: 6pt;
	margin-bottom: 1pt;
}
p, ul {
	margin-top: 2pt;
	margin-bottom: 2pt;
}
b {
	color: #FFFF00;
	font-weight: bold;
}
i {
	color: #00FFFF;
	font-style: italic;
}
.inf {
	color: #FFFFFF;
}
.undr {
	text-decoration: underline;
}
-->
</style>
</head>

<body>

<h1>Просмотрщик образов дискет БК.</h1>
<h2>Возможности.</h2>
<ul>
	<li>Просмотр содержимого образов дискет в различных форматах файловых систем 
	БК-0010/БК-0011(М), как списка файлов, так и самих файлов. В текстовом виде 
	или в графическом, в виде спрайта.</li>
	<li>Добавление файлов в образ, если возможно - даже со структурой каталогов.</li>
	<li>Удаление файлов/каталогов из образа.</li>
	<li>Переименование файлов/каталогов в образе.</li>
	<li>Извлечение файлов из образа, возможно со структурой каталогов. </li>
	<li>При наличии установленного драйвера <i>fdrawcmd</i>, возможен доступ к реальным 
	дискетам в реальном дисководе, со всеми вышеуказанными возможностями. </li>
</ul>
<p>Однако, опыт использования программы с реальными дискетами показал, что требуется 
осторожность в обращении. При неаккуратном использовании возможна порча дискет. 
Нужно обязательно закрывать программу, прежде чем вынимать дискету из дисковода, 
потому что на каком-то этапе делается кеширование, и пока не закрыть хэндл устройства, 
кэш на диск не сбрасывается.</p>
<h2>Определяемые форматы.</h2>
<ul>
	<li><b>MicroDOS</b> - опознаётся по маркеру <i>MicroDOS</i>. Из общего формата 
	распознаются следующие форматы:
	<ul>
		<li><b>MKDOS</b> - опознаётся по маркеру <i>MKDOS</i></li>
		<li><b>NORD</b> - опознаётся по дескриптору <i>&quot;NORD&quot;</i> </li>
		<li><b>AO-DOS</b> - опознаётся либо по дескриптору <i>&quot;AO-DOS&quot;</i>, 
		либо по признакам расширенного формата <b>AO-DOS</b>.</li>
	</ul>
	</li>
	<li><b>ANDOS</b> - опознаётся по дескриптору файловой системы <i>&quot;FAT12&quot;</i>, 
	либо по дескриптору <i>&quot;ANDOS&quot;</i> и по уникальным значениям параметров
	<i>BPB</i>, характерным только для <b>ANDOS</b>.</li>
	<li><b>CSIDOS3</b> - опознаётся по наличию во 2-м секторе маркеров <i>CSIDOS3</i></li>
	<li><b>RT-11</b> - Опознаётся по наличию в 0-м секторе строки <i>&quot;?BOOT-U-&quot;</i>&nbsp; 
	или <i>&quot;?QUBOOT-U-&quot;</i> потому что, по стандарту, в 0-м секторе должен 
	быть либо загрузчик системы, либо подпрограмма, выводящая на экран сообщение, 
	что загрузка невозможна. Если в 0-м секторе этих строк нет, а встречаются и 
	такие диски RT-11, то они не распознаются. Диски <i>УКНЦ</i> тоже опознаются, 
	при условии, что каталог начинается с 6 сектора, и начальный сегмент каталога 
	- первый, т.к. у них нету идентификатора диска, который находится в первом секторе, 
	предполагается, что это стандарт.</li>
	<li><b>HC-DOS</b> - опознаётся по началу загрузчика, несистемный диск не опознаётся, 
	т.к. во-первых такого у меня нету, во-вторых я вообще без понятия, как однозначно 
	опознать эту ОС.</li>
	<li><b>DX-DOS</b> - опознаётся по дескриптору файловой системы <i>&quot;FAT12&quot;</i>.</li>
</ul>
<p>Обрабатываются логические диски <b>MKDOS</b>, <b>NORD</b> и <b>RT-11</b>:</p>
<ul>
	<li>явно опознаётся логический диск только в <b>MKDOS</b>, потому что только 
	в ней присутствует атрибут, отличающий запись каталога с лог.диском от других 
	записей каталога;</li>
	<li>в <b>RT-11</b> логические диски опознаются по расширению файла
	<span class="inf">DSK</span>;</li>
	<li>в <b>NORD</b> логические диски опознаются по имени файла
	<span class="inf">&lt;Буква&gt;:</span>.</li>
</ul>
<p>Вход внутрь логического диска осуществляется так же, как и в директорию.</p>
<h2>Работа с программой.</h2>
<h3>Открытие образа.</h3>
<p>При запуске программы на экране отображается список всех образов дискет, находящихся 
в текущей рабочей директории. <i>Двойной клик мышью</i>, либо клавиша <i>&quot;Enter&quot;</i> 
- выбор заданного образа.</p>
<p>Так же можно выбрать нужный образ, вызвав файловый диалог нажатием левой кнопкой 
мыши на кнопке <i>&quot;F2 ОБРАЗ&quot;</i>, либо нажатием клавиши <i>&quot;F2&quot;</i>. &nbsp;Это 
особенно полезно, если нужно сменить рабочую директорию, в которой находятся интересующие 
образы.</p>
<p>Из выпадающего меню этой кнопки можно выбрать привод дисковода
<span class="inf">A:</span> или&nbsp; <span class="inf">B:</span>. Всё это работает 
только если дисковод физически подключён, и драйвер <i>fdrawcmd</i> установлен. 
Если эти условия не соблюдены, то ничего не работает, но меню не исчезает. Оно статическое.</p>
<p>Повторное открытие уже открытого образа невозможно, т.к. он уже открыт и недоступен 
другим программам, даже себе.</p>
<h3>Перемещение по каталогу.</h3>
<p>Перемещаться вверх-вниз по файлам можно клавиатурой, клавишами со стрелками, 
но при этом снимается выделение, сделать навигацию типа как в винраре просто лень. 
Вход в подкаталог и выход из него - <i>двойной клик мышью</i>, либо клавиша <i>&quot;Enter&quot;</i>.</p>
<p>Так же работает навигация по каталогу как в файловых менеджерах: <i>Page Up</i>/<i>Page 
Down</i>, <i>Ctrl</i>+<i>Left</i>/<i>Ctrl</i>+<i>Right</i> - перемещение на экран 
вверх/вниз с небольшими нюансами. <i>Ctrl</i>+<i>Page Down</i>/<i>Ctrl</i>+<i>Page 
Up</i> - вход в директорию на которой стоит курсор и выход из директории независимо 
от положения курсора.</p>
<p>Пункт <span class="inf">&quot;..&quot;</span> в корневой директории вызывает 
выход из текущего образа и его выгрузку и переход к отображению списка образов в 
рабочей директории.</p>
<h3>Извлечение файлов из образа.</h3>
<p>Выделяете мышью, или клавишей <i>&quot;Insert&quot;</i> файл или каталог, можно выделить 
несколько элементов одновременно, и нажимаете кнопку <i>&quot;F7 ИЗВЛЕЧЬ&quot;</i>, 
либо клавишей <i>&quot;F7&quot;</i>. Извлекается всё содержимое каталога с подкаталогами, 
в именах файлов и каталогов заменяются всякие опасные символы, типа:
<span class="inf">&lt; &gt; | : ? * &quot; / \</span> на символы сходные по начертанию, 
либо на знак подчёркивания <span class="inf">_</span>.</p>
<p>Если установить галочку <i>&quot;Использовать формат .bin&quot;</i>, то в начале 
файла будут сперва записываться 2 слова: адрес загрузки, и длина, причём если файл 
больше 64к, то к нему формат применяться не будет, файл будет сохранён как есть.</p>
<p>Если задана опция <i>&quot;Длинный формат .bin&quot;</i>, то кроме всего прочего в заголовке
<i>&quot;.bin&quot;</i> будет сохраняться оригинальное имя файла.</p>
<p>Если установить галочку <i>&quot;Создавать лог анализа извлекаемых файлов&quot;</i>, 
то будет создаваться файл <i>&quot;extractlog.txt&quot;</i> с параметрами каждого 
извлечённого файла: оригинальное имя, адрес загрузки, размер файла и адрес запуска. 
Если есть блок автозапуска, то адрес берётся оттуда, причём для <b>CSIDOS</b>, где 
обычно используется малопонятная система определения адреса запуска файла, у которого 
адрес загрузки меньше <i>01000</i>, возможно ошибочное определение адреса запуска. 
В каждой извлечённой вложенной директории создаётся свой файл <i>&quot;extractlog.txt&quot;</i>.</p>
<p>Так же, лог извлекаемых файлов будет полезен, если при экспорте файлы были переименованы 
(были заменены запрещённые символы).</p>
<p>Специально для <b>CSIDOS</b>. При извлечении файлов к их расширениям добавляется 
информация о страницах. В следующем виде:<br><i>#N0xN1</i>,<br>где:<br><i>#</i> 
- признак информации о страницах;<br><i>N0</i>, <i>N1</i> - номера страниц в окне
<span class="inf">0</span> и <span class="inf">1</span> соответственно;<br><i>x</i> 
- режим БК: <span class="inf">'-'</span> - БК0010, <span class="inf">'!'</span> 
- БК0011М.</p>
<p>Например: <span class="inf">filename.exe#5!7</span>, <span class="inf">readme.txt#3-4</span></p>
<p>Для других ФС эти данные ничего не значат и будут считаться полноценными символами 
имени файла, так что если они не нужны - удаляйте их сами.</p>
<p>Несмотря на то, что внутрь логического диска можно зайти, он
<span class="undr">всё ещё считается файлом</span> и при нажатии на нём <i>&quot;F7&quot;</i> 
извлекается целиком как файл. Извлечь всю его файловую структуру таким образом невозможно, 
т.к. она не включается в дерево каталогов и файлов корневого образа. Для этого надо 
зайти внутрь логического диска, выделить нужные каталоги и файлы и извлекать их.</p>
<h3>Просмотр файлов.</h3>
<p>Нажав на кнопку <i>&quot;F3 ПРОСМ&quot;</i>, либо клавишу <i>&quot;F3&quot;</i> 
можно просмотреть выделенные файлы, если выделено несколько файлов - все они выводятся 
на просмотр по очереди, пока не закрыть блокнот с одним файлом, следующий не получится 
просмотреть, выделенные среди них каталоги игнорируются. Так же нажатие клавиши
<i>&quot;Enter&quot;</i> на текущем файле вызовет его просмотр.</p>
<p>Можно просмотреть файлы в виде спрайта. Для этого необходимо выделить нужны файлы 
и нажать кнопку <i>&quot;F4 ГРАФ.ВИД&quot;</i> или клавишу <i>&quot;F4&quot;</i>, 
все выделенные файлы выводятся каждый в своём окошке одновременно. Если выделить 
100 файлов, то у вас откроются 100 окошек, надо ли вам это, решать вам.</p>
<h3>Добавление файлов.</h3>
<p>Во все образы можно добавлять файлы, но в редкоиспользуемых форматах образов 
(типа <b>HC-DOS</b>) добавление может работать некорректно. Для <b>NORD</b> и <b>
AODOS</b> - в связи с их не устоявшимися форматами, в одни образы добавление может 
работать правильно, а в другие - может портить каталог образа.</p>
<p>По нажатию кнопки <i>&quot;F5 ДОБАВИТЬ&quot;</i> или клавиши <i>&quot;F5&quot;</i> 
появится диалог выбора файлов и папок, в котором можно выбрать файлы или директории 
для добавления. Можно одновременно выбрать несколько элементов. Если выбрана директория, 
то добавляется всё её содержимое, со всеми подкаталогами, так что надо быть осторожным, 
может очень быстро закончиться свободное место. </p>
<p><span class="inf">Внимание!</span> В диалоге выбора не используйте двойной клик 
мышью, это вызовет запуск файла на исполнение, данная функция не перехвачена и пока 
непонятно как её перехватить.</p>
<p>Реализовано автоматическое определение формата <i>&quot;.bin&quot;</i> (это когда 
первые два слова файла - адрес и его длина) причём обоих видов - длинного и короткого, 
и если формат определён, то расширение <i>&quot;.bin&quot;</i> автоматически удаляется 
за ненадобностью.</p>
<p>Если был определён длинный формат <i>&quot;.bin&quot;</i>, то имя файла берётся 
оттуда.</p>
<p>Специально для <b>CSIDOS</b>. При добавлении файлов ищется информация о страницах 
в виде <i>#N0xN1</i>, и если обнаруживается, то обрабатывается и удаляется из имени 
файла.</p>
<p>Если файл с таким именем уже есть в каталоге образа, то появляется запрос, перезаписать 
файл или пропустить.</p>
<p><span class="inf">Примечание.</span> В силу крайней глючности каталогов и хаотичной 
смены форматов от версии к версии, не удалось сделать надёжную запись файлов в образы
<b>NORD</b> и <b>AODOS</b>. Некоторая часть образов этих ОС может портиться. </p>
<h3>Переименование файлов/каталогов.</h3>
<p>Для переименования в образе необходимо выделить нужный элемент, и нажать кнопку
<i>&quot;F6 ПЕРЕИМ&quot;</i> или клавишу <i>&quot;F6&quot;</i>. И в появившемся 
диалоге отредактировать имя файла/каталога. Если выделено несколько элементов, то 
диалог будет вызываться для каждого выделенного. Групповое переименование, и переименование 
по маске не реализовано.</p>
<h3>Удаление файлов/каталогов.</h3>
<p>Для удаления из образа необходимо выделить нужный элемент, и нажать кнопку <i>&quot;F8 
УДАЛИТЬ&quot;</i> или клавишу <i>&quot;F8&quot;</i> (или <i>&quot;Delete&quot;</i>). 
Если выделено несколько элементов, то удаляются все. Если в директории что-то есть, 
выдаётся запрос на подтверждение удаления директории. Если выделенный файл защищён, 
то выдаётся запрос на подтверждение удаления такого файла.</p>
<h2>Атрибуты файла/каталога.</h2>
<ul type="disc">
	<li><span class="inf">x</span> - файл удалён, удалённых каталогов я ещё не встречал.</li>
	<li><span class="inf">B</span> - Bad Block - для <b>MicroDOS</b> и <b>RT-11</b> 
	так помечаются записи, перекрывающие сбойные секторы.</li>
	<li><span class="inf">D</span> - Директория.</li>
	<li><span class="inf">L</span> - Логический диск. Однозначно опознаётся только 
	в <b>MKDOS</b>. В <b>NORD</b> и <b>RT-11</b> опознаётся по неочевидным признакам, 
	для опознания не хватает информации по этим ОС.</li>
	<li><span class="inf">P</span> - Защищённый файл (<b>MicroDOS</b>, <b>CSIDOS3</b>,
	<b>RT-11</b>).</li>
	<li><span class="inf">H</span> - Скрытый файл (<b>AO-DOS</b>).</li>
	<li><span class="inf">T</span> – Временный файл. Только для <b>RT-11</b>, судя 
	по описанию ОС, это не закрытый файл после работы с ним. По сути, свободное 
	место на диске, его можно посмотреть, но в большинстве случаев там хранится 
	мусор.</li>
</ul>

</body>

</html>
